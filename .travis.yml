language: cpp
compiler: gcc
dist: trusty
sudo: required
env:
  - GDAL_ROOT=$HOME/.libs/gdal
cache:
  directories:
    - $HOME/.libs
install: 
  - sudo apt-get -qq update
  - sudo apt-get install -y build-essential gnome-devel cmake git
  - sudo apt-get install -y libnetcdf-dev libproj-dev libjasper-dev libcurl3 libwxgtk3.0-dev
  - chmod +x ci/build-gdal.sh
  - travis_wait 30 ci/build-gdal.sh
  - cmake CMakeLists.txt -DBUILD_OPTIMIZER=1 -DBUILD_FORECASTER=1 -DBUILD_VIEWER=1 -DCMAKE_BUILD_TYPE=RelWithDebInfo -DUSE_CODECOV=0
  - make -j$(nproc)
script:
  - ctest -V
