cmake_minimum_required(VERSION 3.0)

project(libnetcdf)

if ("${HDF5_LIBRARIES}" STREQUAL "")
    message(FATAL_ERROR "HDF5_LIBRARIES not set")
endif()
if ("${HDF5_C_LIBRARIES}" STREQUAL "")
    message(FATAL_ERROR "HDF5_C_LIBRARIES not set")
endif()
if ("${HDF5_HL_LIBRARIES}" STREQUAL "")
    message(FATAL_ERROR "HDF5_HL_LIBRARIES not set")
endif()

include(ExternalProject)

ExternalProject_Add(libnetcdf
        GIT_REPOSITORY https://github.com/Unidata/netcdf-c
        GIT_TAG v4.4.1.1
        UPDATE_COMMAND ""
        CMAKE_ARGS
            -DENABLE_DAP:BOOL=OFF
            -DBUILD_UTILITIES:BOOL=OFF
            -DENABLE_TESTS:BOOL=OFF
            -DBUILD_SHARED_LIBS:BOOL=OFF
            -DCMAKE_PREFIX_PATH:STRING=${EXTERNAL_DIR}
            -DCMAKE_INSTALL_PREFIX:STRING=${EXTERNAL_DIR}
        )
